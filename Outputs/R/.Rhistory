Zero[Zero != 0] = 0
# Empty sets where the information will be stacked
RasterStack_Burn = stack()
RasterStack_AllF = stack()
RasterStack_AccF = stack()
RasterStack_NatF = stack()
RasterStack_RxF = stack()
for(scenario in ListScenario){
# When changing a scenario, the input file change
# and the total burned and frequency scenarios are initialised to 0
if(scenario == "BAU") {
Input = BAU_input
TotBurn = Zero
FreqAllT = Zero
FreqAcc = Zero
FreqNat = Zero
FreqRx = Zero
} else if(scenario == "Adapty"){
Input = Adapty_input
TotBurn = Zero
TotBurn = Zero
FreqAllT = Zero
FreqAcc = Zero
FreqNat = Zero
FreqRx = Zero
} else {
Input = ProAct_input
TotBurn = Zero
TotBurn = Zero
FreqAllT = Zero
FreqAcc = Zero
FreqNat = Zero
FreqRx = Zero}
for (i in 1:100) {
# The total burned biomass is the biomass burned the previous years
# added to the flaming and smolder consumptions of the ongoing year
Raster_fc = paste0(Input, "..1/scrapple-fire/flaming-consumptions-",i,".img") %>% raster()
Raster_sm = paste0(Input, "..1/scrapple-fire/smolder-consumption-",i,".img") %>% raster()
RasterBurn = Raster_fc + Raster_sm
TotBurn = TotBurn + RasterBurn
Raster_FT = paste0(Input, "..1/scrapple-fire/ignition-type-",i,".img") %>% raster()
Raster_FT[Raster_FT == 1] = 0 # the unburned area (map code 1) is not considered here
# The sum of all types of fires is the zones where a fire append the previous years
# (all the types of fire takes the map code 1), added to the zones of the ongoing year
FreqAllT = Raster_FT
FreqAllT[FreqAllT != 0] = 1
FreqAllT = FreqAllT + FreqAllT
# The same is done with accidental fires
# (initial map code 2 turned to 1, all the rest 0)
Raster_Acc = Raster_FT
Raster_Acc[Raster_Acc == 2] = 1
Raster_Acc[Raster_Acc != 1] = 0
FreqAcc = FreqAcc + Raster_Acc
# Idem with natural fires
Raster_Nat = Raster_FT
Raster_Nat[Raster_Nat == 3] = 1
Raster_Nat[Raster_Nat != 1] = 0
FreqNat = FreqNat + Raster_Nat
# Idem with prescribed fires
Raster_Rx = Raster_FT
Raster_Rx[Raster_Rx == 4] = 1
Raster_Rx[Raster_Rx != 1] = 0
FreqRx = FreqRx + Raster_Rx
if(i==100){
# The total after the 100 years of run is saved
TotBurn[TotBurn == 0] = NA
names(TotBurn) = scenario
RasterStack_Burn = stack(RasterStack_Burn, TotBurn)
FreqAllT[FreqAllT == 0] = NA
FreqAllT = FreqAllT/100
names(FreqAllT) = paste0(scenario,"all")
RasterStack_AllF = stack(RasterStack_AllF, FreqAllT)
FreqAcc[FreqAcc == 0] = NA
FreqAcc = FreqAcc/100
names(FreqAcc) = paste0(scenario,"Acc")
RasterStack_AccF = stack(RasterStack_AccF, FreqAcc)
FreqNat[FreqNat == 0] = NA
FreqNat = FreqNat/100
names(FreqNat) = paste0(scenario,"Nat")
RasterStack_NatF = stack(RasterStack_NatF, FreqNat)
FreqRx[FreqRx == 0] = NA
FreqRx = FreqRx/100
names(FreqRx) = paste0(scenario,"Rx")
RasterStack_RxF = stack(RasterStack_RxF, FreqRx)
}
}
}
VarSatck = RasterStack_Burn
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=10000)
nbrks = length(brks)-1
r.range = c(Min, Max)
rasTot = raster(ncol=2, nrow=1)
values(rasTot) = c(Min,Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max))
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="Biomass burned ()",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = stack(RasterStack_AllF, RasterStack_AccF, RasterStack_NatF,RasterStack_RxF)
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
plot(RasterStack_AllF[[1]])
plot(RasterStack_AccF[[1]])
plot(RasterStack_NatF[[1]])
plot(RasterStack_RxF[[1]])
plot(RasterStack_NatF[[1]])
plot(RasterStack_RxF[[1]])
VarSatck = RasterStack_Burn
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
VarSatck = RasterStack_Burn
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=10000)
nbrks = length(brks)-1
r.range = c(Min, Max)
rasTot = raster(ncol=2, nrow=1)
values(rasTot) = c(Min,Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max))
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="Biomass burned ()",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = stack(RasterStack_AllF, RasterStack_AccF, RasterStack_NatF,RasterStack_RxF)
maxValue(VarSatck)
# Raster of zeros with the proper definition and extent
Zero = paste0(BAU_input, "..1/scrapple-fire/flaming-consumptions-1.img") %>% raster()
Zero[Zero != 0] = 0
# Empty sets where the information will be stacked
RasterStack_Burn = stack()
RasterStack_AllF = stack()
RasterStack_AccF = stack()
RasterStack_NatF = stack()
for(scenario in ListScenario){
# When changing a scenario, the input file change
# and the total burned and frequency scenarios are initialised to 0
if(scenario == "BAU") {
Input = BAU_input
TotBurn = Zero
FreqAllT = Zero
FreqAcc = Zero
FreqNat = Zero
} else if(scenario == "Adapty"){
Input = Adapty_input
TotBurn = Zero
TotBurn = Zero
FreqAllT = Zero
FreqAcc = Zero
FreqNat = Zero
} else {
Input = ProAct_input
TotBurn = Zero
TotBurn = Zero
FreqAllT = Zero
FreqAcc = Zero
FreqNat = Zero}
for (i in 1:100) {
# The total burned biomass is the biomass burned the previous years
# added to the flaming and smolder consumptions of the ongoing year
Raster_fc = paste0(Input, "..1/scrapple-fire/flaming-consumptions-",i,".img") %>% raster()
Raster_sm = paste0(Input, "..1/scrapple-fire/smolder-consumption-",i,".img") %>% raster()
RasterBurn = Raster_fc + Raster_sm
TotBurn = TotBurn + RasterBurn
Raster_FT = paste0(Input, "..1/scrapple-fire/ignition-type-",i,".img") %>% raster()
Raster_FT[Raster_FT == 1] = 0 # the unburned area (map code 1) is not considered here
# The sum of all types of fires is the zones where a fire append the previous years
# (all the types of fire takes the map code 1), added to the zones of the ongoing year
FreqAllT = Raster_FT
FreqAllT[FreqAllT != 0] = 1
FreqAllT = FreqAllT + FreqAllT
# The same is done with accidental fires
# (initial map code 2 turned to 1, all the rest 0)
Raster_Acc = Raster_FT
Raster_Acc[Raster_Acc == 2] = 1
Raster_Acc[Raster_Acc != 1] = 0
FreqAcc = FreqAcc + Raster_Acc
# Idem with natural fires
Raster_Nat = Raster_FT
Raster_Nat[Raster_Nat == 3] = 1
Raster_Nat[Raster_Nat != 1] = 0
FreqNat = FreqNat + Raster_Nat
if(i==100){
# The total after the 100 years of run is saved
TotBurn[TotBurn == 0] = NA
names(TotBurn) = scenario
RasterStack_Burn = stack(RasterStack_Burn, TotBurn)
FreqAllT[FreqAllT == 0] = NA
FreqAllT = FreqAllT/100
names(FreqAllT) = paste0(scenario,"all")
RasterStack_AllF = stack(RasterStack_AllF, FreqAllT)
FreqAcc[FreqAcc == 0] = NA
FreqAcc = FreqAcc/100
names(FreqAcc) = paste0(scenario,"Acc")
RasterStack_AccF = stack(RasterStack_AccF, FreqAcc)
FreqNat[FreqNat == 0] = NA
FreqNat = FreqNat/100
names(FreqNat) = paste0(scenario,"Nat")
RasterStack_NatF = stack(RasterStack_NatF, FreqNat)
}
}
}
VarSatck = RasterStack_Burn
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=10000)
nbrks = length(brks)-1
r.range = c(Min, Max)
rasTot = raster(ncol=2, nrow=1)
values(rasTot) = c(Min,Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max))
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="Biomass burned ()",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = stack(RasterStack_AllF, RasterStack_AccF, RasterStack_NatF)
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
rasTot = raster(ncol=2, nrow=1)
values(rasTot) = c(Min,Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of all fire types")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = RasterStack_AccF
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of accidental fire")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = RasterStack_NatF
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of natural fire")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = stack(RasterStack_AllF)
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
rasTot = raster(ncol=2, nrow=1)
values(rasTot) = c(Min,Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of all fire types")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = RasterStack_AccF
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of accidental fire")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = RasterStack_NatF
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of natural fire")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = stack(RasterStack_AllF)
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
rasTot = raster(ncol=2, nrow=1)
values(rasTot) = c(Min,Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of all fire types")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = RasterStack_AccF
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of accidental fire")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = RasterStack_NatF
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of natural fire")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
# Raster of zeros with the proper definition and extent
Zero = paste0(BAU_input, "..1/scrapple-fire/flaming-consumptions-1.img") %>% raster()
Zero[Zero != 0] = 0
# Empty sets where the information will be stacked
RasterStack_Burn = stack()
RasterStack_AllF = stack()
RasterStack_AccF = stack()
RasterStack_NatF = stack()
for(scenario in ListScenario){
# When changing a scenario, the input file change
# and the total burned and frequency scenarios are initialised to 0
if(scenario == "BAU") {
Input = BAU_input
TotBurn = Zero
FreqAllT = Zero
FreqAcc = Zero
FreqNat = Zero
} else if(scenario == "Adapty"){
Input = Adapty_input
TotBurn = Zero
TotBurn = Zero
FreqAllT = Zero
FreqAcc = Zero
FreqNat = Zero
} else {
Input = ProAct_input
TotBurn = Zero
TotBurn = Zero
FreqAllT = Zero
FreqAcc = Zero
FreqNat = Zero}
for (i in 1:100) {
# The total burned biomass is the biomass burned the previous years
# added to the flaming and smolder consumptions of the ongoing year
Raster_fc = paste0(Input, "..1/scrapple-fire/flaming-consumptions-",i,".img") %>% raster()
Raster_sm = paste0(Input, "..1/scrapple-fire/smolder-consumption-",i,".img") %>% raster()
RasterBurn = Raster_fc + Raster_sm
TotBurn = TotBurn + RasterBurn
Raster_FT = paste0(Input, "..1/scrapple-fire/ignition-type-",i,".img") %>% raster()
Raster_FT[Raster_FT == 1] = 0 # the unburned area (map code 1) is not considered here
# The sum of all types of fires is the zones where a fire append the previous years
# (all the types of fire takes the map code 1), added to the zones of the ongoing year
Raster_AllT = Raster_FT
Raster_AllT[Raster_AllT != 0] = 1
FreqAllT = FreqAllT + Raster_AllT
# The same is done with accidental fires
# (initial map code 2 turned to 1, all the rest 0)
Raster_Acc = Raster_FT
Raster_Acc[Raster_Acc == 2] = 1
Raster_Acc[Raster_Acc != 1] = 0
FreqAcc = FreqAcc + Raster_Acc
# Idem with natural fires
Raster_Nat = Raster_FT
Raster_Nat[Raster_Nat == 3] = 1
Raster_Nat[Raster_Nat != 1] = 0
FreqNat = FreqNat + Raster_Nat
if(i==100){
# The total after the 100 years of run is saved
TotBurn[TotBurn == 0] = NA
names(TotBurn) = scenario
RasterStack_Burn = stack(RasterStack_Burn, TotBurn)
FreqAllT[FreqAllT == 0] = NA
FreqAllT = FreqAllT/100
names(FreqAllT) = paste0(scenario,"all")
RasterStack_AllF = stack(RasterStack_AllF, FreqAllT)
FreqAcc[FreqAcc == 0] = NA
FreqAcc = FreqAcc/100
names(FreqAcc) = paste0(scenario,"Acc")
RasterStack_AccF = stack(RasterStack_AccF, FreqAcc)
FreqNat[FreqNat == 0] = NA
FreqNat = FreqNat/100
names(FreqNat) = paste0(scenario,"Nat")
RasterStack_NatF = stack(RasterStack_NatF, FreqNat)
}
}
}
VarSatck = RasterStack_Burn
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=10000)
nbrks = length(brks)-1
r.range = c(Min, Max)
rasTot = raster(ncol=2, nrow=1)
values(rasTot) = c(Min,Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max))
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="Biomass burned ()",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = stack(RasterStack_AllF)
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
rasTot = raster(ncol=2, nrow=1)
values(rasTot) = c(Min,Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of all fire types")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = RasterStack_AccF
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of accidental fire")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = RasterStack_NatF
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max),
main = "Frequency of natural fire")
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = stack(RasterStack_AllF)
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
rasTot = raster(ncol=2, nrow=1)
values(rasTot) = c(Min,Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max))
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = RasterStack_AccF
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max))
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
VarSatck = RasterStack_NatF
Max = max(maxValue(VarSatck))+1
Min = min(minValue(VarSatck))
brks = seq(Min,Max,by=0.1)
nbrks = length(brks)-1
r.range = c(Min, Max)
par(mfrow=c(1,3))
plot(VarSatck, breaks=brks,col=pal.2(nbrks), legend = F, zlim=c(Min,Max))
plot(rasTot, legend.only=TRUE, col=pal.2(nbrks),
legend.width=1, legend.shrink=0.75,
legend.args=list(text="??",
side=4, font=2, line=2.5, cex=0.8))
